<!DOCTYPE html>
<html>
<head>
	<title>Gee-Mail: The LAST E-Mail Client You will Ever Need!</title>
	<link rel="stylesheet" media="screen" href="css/style1.css">
	<script src="js/mail-generator.js"></script>
	<script >
		window.onload = function () {
			//Variables list. Changes windows.geemail to a shorter stiring. 
			//sets up variables for each message component.
			var info = window.geemails;
			var sender;
			var subject;
			var date;
			var body;
			var showing;
			var messageInterval = setInterval (function messageRelease(){
            msgInt() }, 8000);

			//Creates the counter for the messages.
			var count = document.createElement("div");
        	count.innerHTML = "YOU HAVE " + info.length + " MESSAGES";
        	mailCount.appendChild(count);
        	count.className = "count"

        	//Creates 10 messages from the inputs loaged in mail-generator.js.
			function printList (info) {
				for(var i = 0; i < info.length; i += 1) {
					sender = info[i].sender;
					subject = info[i].subject;
					date = info[i].date;
					body = info[i].body;
					//console.log(info[i].sender);
					//console.log(info[i].subject);
					//console.log(info[i].date);
					//console.log(info[i].body);
					from = document.createElement("div");
					from.innerHTML = "FROM: " + info[i].sender + '<br>';
          			select.appendChild(from);
         	 		from.className = "from";
         	 		title = document.createElement("div");
          			title.innerHTML = "SUBJECT: " + info[i].subject + '<br>';
          			select.appendChild(title);
         	 		title.className = "title";
         	 		date = document.createElement("div");
          			date.innerHTML = info[i].date + '<br>' + '<br>';
          			select.appendChild(date);
         	 		date.className = "date";
         	 		body = document.createElement("div");
          			body.innerHTML = info[i].body + '<br>' + '<br>';
          			body.style.display = "none";
          			date.appendChild(body);
         	 		body.className = "body";
				}
			}
			printList(info);

			var displayMsg = document.getElementsByClassName ("date");
			for ( var i = 0; i < displayMsg.length; i ++) {
					displayMsg[i].addEventListener('click', showMsg)
			}

			function showMsg () {
				showing = this.querySelectorAll(".body")[0];
				if (showing.style.display === 'none') {
					showing.style.display = 'block';
				} else {
					showing.style.display = 'none';
				}
			}

			//Updates message count as new messages are created.
			function updateCount(){
            	info.push(getNewMessage());
            	var addCount = count;
            	addCount.innerHTML = "YOU HAVE " + info.length + " MESSAGES";
            	mailCount.appendChild(count);
            	count.className = "count";
          }
          //Creates new randomly generated messages. 
          function msgInt(){
            var inner = document.createElement("div");
            select.appendChild(inner);
            inner.className = "inner";
            var addFrom = document.createElement("div");
            addFrom.innerHTML = "FROM: " + info[info.length - 1].sender + '<br>';
            select.appendChild(addFrom);
            addFrom.className = "from";
            var addTitle = document.createElement("div");
            addTitle.innerHTML = "SUBJECT: " + info[info.length - 1].subject + '<br>';
            select.appendChild(addTitle);
            addTitle.className = "title";
            var addDate = document.createElement("div");
           	addDate.innerHTML = info[info.length - 1].date + '<br>' + '<br>';
           	select.appendChild(addDate);
           	addDate.className = "date";
            var addMessage = document.createElement("div");
            addMessage.innerHTML = info[info.length - 1].body + '<br>' + '<br>';
            addMessage.style.display = "none"
            addDate.appendChild(addMessage);
            addMessage.className = "body";
            updateCount();
          }
		};
	</script>
</head>
<body>
	<div id = "container">
		<div id= "header">
			<header>
				<h1>Gee-Mail<img src="images/mail.png"></h1>
			</header>
		</div>
		<div id= "folders">
			<ul style="list-style: none;" padding: 0px>
				<li><h6 id="mailCount"></h6></li>
				<li><a href="#"><h3>Inbox</h3></a></li>
				<li><a href="#"><h3>Sent</h3></a></li>
				<li><a href="#"><h3>Drafts</h3></a></li>
				<li><a href="#"><h3>Trash</h3></a></li>
			</ul>
		</div>
		<div id = "messages">
			<h4>Messages</h4>
			<div id= "select"></div>
		</div>
		<div id= "content"></div>
		<div id= "footer">
			Copyright &copy; 2018 Scott Joseph-Smith
		</div>
	</div>
</body>
</html>
